import{_ as x}from"./page-header.vue.8fc97ede.js";import{R as E,a as D,M as B,r as n,k as _,l as q,u as l,h as P,m as a,w as d,p as f,o as b,q as T,v as h,s as N,c as G,A as U,N as A,E as M,O as j,P as I}from"./entry.6a536ff6.js";import{G as O}from"./grid.0c05a82d.js";/* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  */import{c as S}from"./local-firewall.7d9b665c.js";import{U as $}from"./user-request-group.23c589e2.js";import{C as z}from"./catalog-request-group.e513a060.js";import{u as F}from"./utc.dc6bb16b.js";class H extends E{constructor(o){super("report",o)}async build(o,t){return await this.httpClient.post("",o,t)}}const J={key:0},K={class:"flex justify-center"},se=D({__name:"index",setup(v){B.extend(F);const o=n(!1),t=n(),u=n(),k=new z(_()),r=n([]),i=n([]);async function g(){const c=new H(_()),e=[];r.value.forEach(s=>{e.push(s)}),await c.build({productsIds:e,startDate:t.value[0],endDate:t.value[1]},s=>{u.value=s})}return q(async()=>{await S($.Manager,()=>o.value=!0),await k.getAll(c=>{c.forEach(e=>{i.value.push({value:e.id,label:e.name})})})}),(c,e)=>{const s=x,w=U,V=A,y=M,m=j,C=I,R=O;return l(o)?(b(),P("div",J,[a(s,{header:"Формирование отчёта продаж"}),a(R,null,{default:d(()=>[T("div",K,[a(w,{modelValue:l(r),"onUpdate:modelValue":e[0]||(e[0]=p=>h(r)?r.value=p:null),options:l(i),opt:"",placeholder:"Выберите товары",class:"w-2/5 mr-6",multiple:"","collapse-tags":"","collapse-tags-tooltip":""},null,8,["modelValue","options"]),a(V,{modelValue:l(t),"onUpdate:modelValue":e[1]||(e[1]=p=>h(t)?t.value=p:null),type:"daterange",class:"mr-5","start-placeholder":"Начало","end-placeholder":"Конец","default-value":[new Date(2023,5,1),new Date(2023,5,31)]},null,8,["modelValue","default-value"]),a(y,{onClick:g,type:"primary"},{default:d(()=>[N("Сформировать")]),_:1})]),l(u)!=null?(b(),G(C,{key:0,border:"",data:l(u),class:"mt-10"},{default:d(()=>[a(m,{prop:"product.name",label:"Товар"}),a(m,{prop:"count",label:"Кол-во"})]),_:1},8,["data"])):f("",!0)]),_:1})])):f("",!0)}}});export{se as default};
