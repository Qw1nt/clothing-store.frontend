import{a as L,D as M,k as N,r as k,T as P,U as S,f as T,l as F,h as d,m as n,w as a,u as e,v as G,q as t,t as r,p as f,c as V,I as A,J,a3 as $,x as X,E as Y,F as j,a4 as H,o as i,s as m,G as K,V as O,z as Q,Y as W}from"./entry.c85bd422.js";import{_ as Z}from"./page-header.vue.1d1f3d47.js";/* empty css                 *//* empty css                  *//* empty css                   *//* empty css                        *//* empty css                   */import{c as R,r as tt,m as et,u as st}from"./index.445adda1.js";import{P as ot}from"./product-request-group.74754b4b.js";import{f as lt}from"./date-formatter.71011a6f.js";import"./utc.c1ed8360.js";const nt={key:0,class:"col-start-3 col-span-3 text-xs text-red-500"},at={key:1,class:"col-start-3 col-span-3 text-xs text-red-500"},it={class:"dialog-footer"},rt={class:"grid grid-cols-8"},ct=t("div",{class:"col-span-2"},null,-1),dt={class:"col-span-5"},ut={class:"flex"},_t=["src"],mt={class:"ml-10 min-w-[50%]"},pt={class:"text-xl"},vt={class:"text-xl mt-1 font-medium text-gray-600"},ft=t("div",{class:"mt-5"},null,-1),ht={key:0,class:"grid grid-cols-8 flex items-center"},gt=t("div",{class:"text-sm col-span-2 text-gray-500 font-medium uppercase mr-5"}," Цвет ",-1),xt={class:"text-start"},wt={class:"grid grid-cols-8 flex items-center mt-2"},yt=t("div",{class:"col-span-2 text-sm text-gray-500 font-medium uppercase"}," Размер ",-1),kt=t("div",{class:"flex items-center"},null,-1),Vt={class:"w-1/2"},$t={class:"outline outline-1 outline-offset-8 outline-gray-300 rounded-md h-1/2 mt-11"},Rt={key:0,class:"p-1 w-full h-full"},Ct={key:1,class:"text-lg text-gray-500 w-full h-full"},Et={class:"grid grid-cols-8 mt-20"},qt=t("div",{class:"col-span-2"},null,-1),Bt={class:"col-span-5"},Dt={class:"flex items-center"},Ut=t("p",{class:"text-2xl align-base"},"Отзывы",-1),bt={key:0},zt={class:""},It={class:"text-xl font-medium"},Lt={class:"mt-3 text-lg"},Mt={class:"grid grid-cols-12 mt-5"},Nt=t("p",{class:"font-medium"},"Автор:",-1),Pt={class:"ml-3"},St=t("div",{class:"col-span-10"},null,-1),Tt=t("p",{class:"font-medium"},"Дата:",-1),Ft={class:"ml-3 col-span-2"},Gt=t("div",{class:"col-span-8"},null,-1),ee=L({__name:"[id]",setup(At){const C=M(),g=new ot(N()),o=k({}),E=P(),p=k(!1),c=S({title:"",content:""}),x=R.withMessage("Обязательное поле",tt),q=R.withMessage("Минимальная длина - 10 символов",et(10)),B=T(()=>({title:{required:x},content:{required:x,minLength:q}})),u=st(B,c);function D(){$.value==!1?X().push("/login"):E.addProductToCart({productId:o.value.id,count:1})}async function U(){if(await u.value.$validate(),u.value.$error)return;const v=await g.createReview({productId:o.value.id,title:c.title,content:c.content},s=>{o.value.reviews==null&&(o.value.reviews=[]),p.value=!1,o.value.reviews.push(s)});v.errors!=null&&O.error(v.errors)}function b(){c.title="",c.content="",p.value=!1}return F(async()=>{await g.getProduct(C.params.id,v=>o.value=v)}),(v,s)=>{const w=Q,_=Y,z=j,y=Z,I=H,h=W;return i(),d("div",null,[n(z,{modelValue:e(p),"onUpdate:modelValue":s[6]||(s[6]=l=>G(p)?p.value=l:null),title:"Создание отзыва",width:"30%","align-center":""},{footer:a(()=>[t("span",it,[n(_,{onClick:s[4]||(s[4]=l=>b())},{default:a(()=>[m("Отмена")]),_:1}),n(_,{type:"primary",onClick:s[5]||(s[5]=l=>U())},{default:a(()=>[m("Создать")]),_:1})])]),default:a(()=>[n(w,{onChange:s[0]||(s[0]=l=>e(u).title.$touch()),modelValue:e(c).title,"onUpdate:modelValue":s[1]||(s[1]=l=>e(c).title=l),placeholder:"Заголовок"},null,8,["modelValue"]),e(u).title.$error?(i(),d("span",nt,r(e(u).title.$errors[0].$message),1)):f("",!0),n(w,{onChange:s[2]||(s[2]=l=>e(u).content.touch()),class:"mt-1",modelValue:e(c).content,"onUpdate:modelValue":s[3]||(s[3]=l=>e(c).content=l),autosize:{minRows:5,maxRows:10},type:"textarea",placeholder:"Содержание"},null,8,["modelValue"]),e(u).content.$error?(i(),d("span",at,r(e(u).content.$errors[0].$message),1)):f("",!0)]),_:1},8,["modelValue"]),n(y,{header:"Новинки"}),t("div",rt,[ct,t("div",dt,[t("div",ut,[t("img",{src:e(K)(e(o).imageUrl),alt:"none",width:"312"},null,8,_t),t("div",mt,[t("div",pt,r(e(o).name),1),t("div",vt,r(e(o).price)+"₽ ",1),ft,e(o).color!=null&&e(o).color!=""?(i(),d("div",ht,[gt,t("div",xt,r(e(o).color),1)])):f("",!0),t("div",wt,[yt,n(I,{class:"col-span-4"},{default:a(()=>[n(_,{type:"outline"},{default:a(()=>[m("XS")]),_:1}),n(_,{type:"outline"},{default:a(()=>[m("S")]),_:1}),n(_,{type:"outline"},{default:a(()=>[m("M")]),_:1}),n(_,{type:"outline"},{default:a(()=>[m("L")]),_:1})]),_:1})]),kt,t("div",Vt,[n(h)]),n(_,{onClick:D,class:"w-1/2",size:"large"},{default:a(()=>[m("Добавить в корзину")]),_:1}),t("div",$t,[e(o).description!=null?(i(),d("p",Rt,r(e(o).description),1)):(i(),d("p",Ct,"Нет описания"))])])])])]),t("div",Et,[qt,t("div",Bt,[t("div",Dt,[Ut,e($)?(i(),V(_,{key:0,onClick:s[7]||(s[7]=l=>p.value=!0),plain:"",class:"ml-2",size:"small"},{default:a(()=>[m("Написать ")]),_:1})):f("",!0)]),n(h),e(o).reviews!=null&&e(o).reviews.length>0?(i(),d("div",bt,[(i(!0),d(A,null,J(e(o).reviews,l=>(i(),d("div",zt,[t("p",It,r(l.title),1),t("p",Lt,r(l.content),1),t("div",Mt,[Nt,t("p",Pt,r(l.owner.login),1),St,Tt,t("p",Ft,r(e(lt)(l.date)),1),Gt]),n(h)]))),256))])):(i(),V(y,{key:1,header:"На этот товар пока нет отзывов"}))])])])}}});export{ee as default};
