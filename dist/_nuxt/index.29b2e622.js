import{a as T,k as $,r as u,l as q,x as v,u as s,h as a,m as _,w as m,v as A,p as k,a5 as F,F as G,o,I as y,J as x,q as e,t as n,K as M,c as O,s as j,E as I}from"./entry.c85bd422.js";/* empty css                   *//* empty css                  */import{a as z,U as D}from"./user-request-group.f12863b2.js";import{G as H}from"./grid.77ef7951.js";import{_ as V}from"./page-header.vue.1d1f3d47.js";import{f as B}from"./date-formatter.71011a6f.js";import"./utc.c1ed8360.js";const J={key:0},K=e("p",{class:"font-bold text-lg"},"Заказ",-1),L=e("div",{class:"grid grid-cols-6 p-1 bg-gray-100 mb-3"},[e("p",{class:"font-medium"},"Номер"),e("p",{class:"font-medium col-span-3"},"Название"),e("p",{class:"font-medium"},"Кол-во"),e("p",{class:"font-medium"},"Цена за штуку")],-1),P={class:"grid grid-cols-6 p-1 mb-5"},S=["href"],Q={class:"flex justify-center mb-16 mt-5"},W={class:"grid grid-cols-4 gap-x-5 justify-items-center text-xl cursor-pointer"},X=["onClick"],Y={key:0,class:"w-1/2"},Z={class:"grid grid-cols-8 gap-y-5"},ee=e("p",{class:"text-bold col-span-3 text-lg font-medium text-gray-700"},"Логин:",-1),te={class:"text-lg col-span-3"},se=e("p",{class:"col-span-2"},null,-1),oe=e("p",{class:"text-bold col-span-3 text-lg font-medium text-gray-700"},"Дата регистрации:",-1),le={class:"text-lg col-span-3"},ae=e("p",{class:"col-span-2"},null,-1),ne=e("div",{class:"col-span-8 mt-10"},null,-1),ie={key:1},ce={key:1,class:"grid grid-cols-5"},re={class:"col-start-2 col-span-3"},ue=e("div",{class:"grid grid-cols-5 bg-gray-100 p-3 mb-3"},[e("p",{class:"font-medium"},"Дата"),e("p",{class:"font-medium text-center col-span-2"},"Кол-во товаров"),e("p",{class:"font-medium text-center"},"Сумма покупки")],-1),de={class:"mb-5 grid grid-cols-5 p-3 outline outline-1 outline-gray-100"},pe={class:"text-center col-span-2"},_e={class:"text-center"},Ce=T({__name:"index",setup(me){const b=new z($()),i=u("profile"),c=u([]),r=u({}),f=u([]),p=u(!1),C=u();function E(){F(),v().push("/")}function w(l){i.value=l}function R(l){C.value=l,p.value=!0}function U(l){let d=0;return l.forEach(g=>d+=g.product.price),d}return q(async()=>{await b.getUserInfo(l=>r.value=l),await b.getOrderHistory(l=>f.value=l),r.value.role==D.Admin&&c.value.push({title:"Админ-панель",key:"admin-panel",onClick:()=>v().push("/admin-panel")}),r.value.role==D.Manager&&c.value.push({title:"Отчёты",key:"sample",onClick:()=>v().push("/admin-panel/report")}),c.value.push({title:"Профиль",key:"profile",onClick:()=>w("profile")}),c.value.push({title:"История заказов",key:"history",onClick:()=>w("history")}),c.value.push({title:"Выйти",key:"logout",onClick:()=>E()})}),(l,d)=>{const g=G,N=I;return s(r)!={}?(o(),a("div",J,[_(g,{modelValue:s(p),"onUpdate:modelValue":d[0]||(d[0]=t=>A(p)?p.value=t:null)},{title:m(()=>[K]),default:m(()=>[L,(o(!0),a(y,null,x(s(C),(t,h)=>(o(),a("div",P,[e("p",null,n(h+1),1),e("a",{class:"col-span-3 hover:text-sky-500 cursor-pointer",href:`/product-info/${t.product.id}`,target:"_blank",title:"Открыть страницу товара"},n(t.product.name),9,S),e("p",null,n(t.count),1),e("p",null,n(t.product.price)+"₽",1)]))),256))]),_:1},8,["modelValue"]),_(V,{header:"Личный кабинет"}),_(H,null,{default:m(()=>[e("div",Q,[e("div",W,[(o(!0),a(y,null,x(s(c),t=>(o(),a("div",{onClick:h=>t.onClick(),class:M({"text-blue-800":s(i)==t.key,"border-b-2 border-blue-700":s(i)==t.key,"text-gray-800":s(i)!=t.key})},n(t.title),11,X))),256))])]),s(i)=="profile"?(o(),a("div",Y,[e("div",Z,[ee,e("p",te,n(s(r).login),1),se,oe,e("p",le,n(s(B)(s(r).registerDate)),1),ae,ne])])):k("",!0),s(i)=="history"?(o(),a("div",ie,[s(f).length==0?(o(),O(V,{key:0,header:"Нет заказрв"})):(o(),a("div",ce,[e("div",re,[ue,(o(!0),a(y,null,x(s(f),t=>(o(),a("div",de,[e("p",null,n(s(B)(t.date)),1),e("p",pe,n(t.items.length),1),e("p",_e,n(U(t.items))+"₽",1),_(N,{onClick:h=>R(t.items),class:"ml-5"},{default:m(()=>[j("Подробнее")]),_:2},1032,["onClick"])]))),256))])]))])):k("",!0)]),_:1})])):k("",!0)}}});export{Ce as default};
